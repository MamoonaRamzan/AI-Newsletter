<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Subscribe to Newsletter</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; padding: 2rem; }
    h1 { color: #2563eb; }
    form { display: flex; flex-direction: column; gap: 1rem; }
    input, select, button { padding: 0.6rem; font-size: 1rem; }
    button { background: #2563eb; color: white; border: none; cursor: pointer; }
  </style>
</head>
<body>
  <h1>üì© Subscribe to Weekly Newsletter</h1>
  <form id="subscribe-form">
    <input type="email" id="email" placeholder="Enter your email" required />
    <select id="niche">
      <option value="AI">Artificial Intelligence</option>
      <option value="Crypto">Crypto</option>
      <option value="Climate">Climate</option>
    </select>
    <button type="submit">Subscribe</button>
  </form>

  <p id="status"></p>

  <script>
    const form = document.getElementById("subscribe-form");
    const status = document.getElementById("status");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value;
      const niche = document.getElementById("niche").value;

      status.textContent = "Submitting...";

      const response = await fetch("https://api.github.com/repos/MamoonaRamzan/AI-Newsletter/actions/workflows/subscribe.yml/dispatches", {
        method: "POST",
        headers: {
          "Authorization": "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", 
          "Accept": "application/vnd.github+json",
        },
        body: JSON.stringify({
          ref: "main",   // branch name
          inputs: { email, niche }
        })
      });

      if (response.ok) {
        status.textContent = "‚úÖ Subscribed successfully!";
      } else {
        status.textContent = "‚ùå Failed. Check console.";
        console.error(await response.text());
      }
    });
  </script>
</body>
</html>
